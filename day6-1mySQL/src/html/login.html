<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>登录</title>
	<link rel="stylesheet" href="../css/bootstrap.css">
	<script>
		document.addEventListener('DOMContentLoaded',()=>{
			let username = document.querySelector('#username');
			let password = document.querySelector('#password');
			let btnLogin = document.querySelector('.btnLogin');

			let statusCode = [200,304];

			let xhr = new XMLHttpRequest();
			xhr.onload = function(){
				if(statusCode.indexOf(xhr.status)>=0){
					let res = xhr.responseText;

					if(res == 'success'){
						location.href = '../index.html';
					}else{
						alert('用户名或密码错误');
						
					}
				}
			}

			btnLogin.onclick = function(){
				let _username = username.value;
				let _password = password.value;

				xhr.open('get',`../api/login.php?username=${_username}&password=${_password}`,true);
				xhr.send();
			}
		})
	</script>
</head>
<body>
	<div class="container">
	<h1>登录</h1>
		<div class="form">
			<div class="form-group">
				<label for="username">用户名：</label>
				<input type="text" id="username" name="username" class="form-control">
				<span class="glyphicon glyphicon-remove form-control-feedback sr-only"></span>
				<span class="help-block"></span>
			</div>
			<div class="form-group">
				<label for="password">密码：</label>
				<input type="password" id="password" name="password" class="form-control">
			</div>
			<button class="btn btn-success btnLogin">登录</button>
		</div>
	</div>
</body>
</html>